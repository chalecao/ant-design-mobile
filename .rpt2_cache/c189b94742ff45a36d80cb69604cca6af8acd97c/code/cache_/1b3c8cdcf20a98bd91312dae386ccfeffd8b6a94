{"code":"import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport closest from '../_util/closest';\r\nimport Modal from './Modal';\r\nexport default function alert(title, message, actions = [{ text: '确定' }], platform = 'ios') {\r\n    let closed = false;\r\n    if (!title && !message) {\r\n        // console.log('Must specify either an alert title, or message, or both');\r\n        return {\r\n            close: () => { },\r\n        };\r\n    }\r\n    const div = document.createElement('div');\r\n    document.body.appendChild(div);\r\n    function close() {\r\n        ReactDOM.unmountComponentAtNode(div);\r\n        if (div && div.parentNode) {\r\n            div.parentNode.removeChild(div);\r\n        }\r\n    }\r\n    const footer = actions.map((button) => {\r\n        // tslint:disable-next-line:only-arrow-functions\r\n        const orginPress = button.onPress || function () { };\r\n        button.onPress = () => {\r\n            if (closed) {\r\n                return;\r\n            }\r\n            const res = orginPress();\r\n            if (res && res.then) {\r\n                res\r\n                    .then(() => {\r\n                    closed = true;\r\n                    close();\r\n                })\r\n                    .catch(() => { });\r\n            }\r\n            else {\r\n                closed = true;\r\n                close();\r\n            }\r\n        };\r\n        return button;\r\n    });\r\n    const prefixCls = 'am-modal';\r\n    function onWrapTouchStart(e) {\r\n        if (!/iPhone|iPod|iPad/i.test(navigator.userAgent)) {\r\n            return;\r\n        }\r\n        const pNode = closest(e.target, `.${prefixCls}-footer`);\r\n        if (!pNode) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    ReactDOM.render(React.createElement(Modal, { visible: true, transparent: true, title: title, transitionName: \"am-zoom\", closable: false, maskClosable: false, footer: footer, maskTransitionName: \"am-fade\", platform: platform, wrapProps: { onTouchStart: onWrapTouchStart } },\r\n        React.createElement(\"div\", { className: `${prefixCls}-alert-content` }, message)), div);\r\n    return {\r\n        close,\r\n    };\r\n}\r\n"}
